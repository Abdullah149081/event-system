<section class="shadow-lg border-b border-gray-100 sticky top-0 z-50 backdrop-blur-md bg-white/95">
    <header class="e-container">
        <nav class="flex items-center justify-between h-[80px]">
            <!-- Logo -->
            <a href="{% url 'home' %}" class="flex items-center gap-2 group">
                <div class="relative">
                    <span class="rounded-full text-2xl font-bold text-white px-3 py-2 bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg group-hover:scale-110 transition-transform duration-200">E</span>
                    <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                </div>
                <span class="text-2xl font-bold select-none bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">ventSys</span>
            </a>
            <!-- Mobile menu button -->
            <button id="nav-toggle"
                    class="md:hidden focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-colors"
                    aria-label="Toggle menu"
                    aria-expanded="false"
                    aria-controls="nav-menu">
                <div class="w-6 h-6 flex flex-col justify-center items-center">
                    <span id="nav-icon-1"
                          class="block w-6 h-0.5 bg-gray-600 transition-all duration-300"></span>
                    <span id="nav-icon-2"
                          class="block w-6 h-0.5 bg-gray-600 mt-1 transition-all duration-300"></span>
                    <span id="nav-icon-3"
                          class="block w-6 h-0.5 bg-gray-600 mt-1 transition-all duration-300"></span>
                </div>
            </button>
            <!-- Navigation Menu -->
            <ul id="nav-menu"
                class="max-h-0 opacity-0 overflow-hidden transition-all duration-300 ease-in-out md:flex md:opacity-100 md:max-h-fit md:overflow-visible space-y-4 md:space-y-0 items-center gap-8 absolute md:static bg-white md:bg-transparent left-0 top-[80px] w-full md:w-auto px-6 py-6 md:p-0 z-50 shadow-lg md:shadow-none border-t md:border-t-0">
                <!-- Navigation Links -->
                <li>
                    <a href="{% url 'home' %}"
                       class="text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                </li>
                {% if request.user.is_authenticated %}
                    <li>
                        <a href="{% url 'dashboard' %}"
                           class="text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <!-- Check if user can create events -->
                    {% for group in request.user.groups.all %}
                        {% if group.name == "Admin" or group.name == "Organizer" %}
                            <li>
                                <a href="{% url 'create_event' %}"
                                   class="text-gray-700 hover:text-green-600 font-medium transition-colors duration-200 flex items-center gap-2 p-2 rounded-lg hover:bg-green-50">
                                    <i class="fas fa-plus-circle"></i>
                                    <span>Create Event</span>
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    <li class="relative group">
                        <button class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors">
                            <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                {{ request.user.first_name|first|default:request.user.username|first|upper }}
                            </div>
                            <span class="font-medium text-gray-700">{{ request.user.first_name|default:request.user.username }}</span>
                            <i class="fas fa-chevron-down text-xs text-gray-500 group-hover:rotate-180 transition-transform"></i>
                        </button>
                        <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="p-2">
                                <div class="px-3 py-2 border-b border-gray-100">
                                    <p class="text-sm font-medium text-gray-700">{{ request.user.get_full_name|default:request.user.username }}</p>
                                    <p class="text-xs text-gray-500">{{ request.user.email }}</p>
                                    {% for group in request.user.groups.all %}
                                        <span class="inline-block mt-1 px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full">{{ group.name }}</span>
                                    {% endfor %}
                                </div>
                                <a href="{% url 'participant_dashboard' %}"
                                   class="flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded">
                                    <i class="fas fa-user"></i>
                                    My Profile
                                </a>
                                <div class="border-t border-gray-100 mt-2 pt-2">
                                    <form action="{% url 'sign_out' %}" method="post" class="w-full">
                                        {% csrf_token %}
                                        <button type="submit"
                                                class="flex items-center gap-2 w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded transition-colors">
                                            <i class="fas fa-sign-out-alt"></i>
                                            Sign Out
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </li>
                {% else %}
                    <li>
                        <a href="{% url 'sign_in' %}"
                           class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg px-6 py-2.5 font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                            Sign In
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'sign_up' %}"
                           class="border-2 border-blue-600 text-blue-600 rounded-lg px-6 py-2.5 font-medium hover:bg-blue-600 hover:text-white transition-all duration-200">
                            <i class="fas fa-user-plus mr-2"></i>
                            Sign Up
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    </header>
</section>
